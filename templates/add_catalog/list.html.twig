{% extends 'base.html.twig' %}

{% block title %}Hello AddCatalogController!{% endblock %}

{% block body %}
    {{ parent() }}
    <style>
        .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
        .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    </style>

    <div class="example-wrapper">
        <h1>Lista systemów</h1>
        <h2>{{ message }}</h2>
        <ul>
            <li><a href="{{ path('app_add_system') }}">Dodaj nowy</a></li>
        {% for system in systems %}
            <li>{{ system.name }}
                {% if is_granted('ROLE_ADMIN') %}
                    <a href="{{ path('app_edit_system', {'id':system.id}) }}">Edytuj</a> -
                {% endif %}
                {% if is_granted('ROLE_GOD') %}
                    <a href="#" onclick="confirmDelete({{ system.id }})">Usuń</a>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    </div>
    <script>
        let message = "Usunięcie systemu spowoduje usunięcie wszystkich powiązanych katalogów wraz z plikami. Tej operacji nie można cofnąć! Czy chcesz kontynuować?";
        function confirmDelete(id) {
            if(window.confirm(message))
            {
                let url = "{{ path('app_delete_system', {'id': 'entity_id'})}}";
                url = url.replace('entity_id', id);
                window.location.href = url;
            }
        }
    </script>
{% endblock %}
